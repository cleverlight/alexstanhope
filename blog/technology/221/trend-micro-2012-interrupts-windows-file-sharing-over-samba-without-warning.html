<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Trend Micro 2012 interrupts Windows file sharing over Samba without warning | Alex Stanhope</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="http://themes/lightenna/lightenna.ico" type="image/x-icon" />
    <link type="text/css" rel="stylesheet" media="all" href="/legacy/modules/aggregator/aggregator.css" />
<link type="text/css" rel="stylesheet" media="all" href="/legacy/modules/node/node.css" />
<link type="text/css" rel="stylesheet" media="all" href="/legacy/modules/system/defaults.css" />
<link type="text/css" rel="stylesheet" media="all" href="/legacy/modules/system/system.css" />
<link type="text/css" rel="stylesheet" media="all" href="/legacy/modules/system/system-menus.css" />
<link type="text/css" rel="stylesheet" media="all" href="/legacy/modules/user/user.css" />
<link type="text/css" rel="stylesheet" media="all" href="/legacy/sites/all/modules/contrib/lightbox2/css/lightbox.css" />
<link type="text/css" rel="stylesheet" media="all" href="/legacy/sites/all/modules/contrib/video_filter/video_filter.css" />
<link type="text/css" rel="stylesheet" media="all" href="/legacy/sites/all/themes/contrib/glossyblue/style.css" />
<link type="text/css" rel="stylesheet" media="all" href="/legacy/sites/all/themes/glossyblue_alex/style_alex.css" />
    <script type="text/javascript" src="/legacy/misc/jquery.js"></script>
<script type="text/javascript" src="/legacy/misc/drupal.js"></script>
<script type="text/javascript" src="/legacy/sites/all/modules/contrib/lightbox2/js/auto_image_handling.js"></script>
<script type="text/javascript" src="/legacy/sites/all/modules/contrib/lightbox2/js/lightbox.js"></script>
<script type="text/javascript" src="/legacy/misc/tableheader.js"></script>
<script type="text/javascript" src="/legacy/sites/all/modules/contrib/google_analytics/googleanalytics.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/", "lightbox2": { "rtl": 0, "file_path": "/(\\w\\w/)system/files", "default_image": "/legacy/sites/all/modules/contrib/lightbox2/images/brokenimage.jpg", "border_size": 10, "font_color": "000", "box_color": "fff", "top_position": "", "overlay_opacity": "0.8", "overlay_color": "000", "disable_close_click": 1, "resize_sequence": 0, "resize_speed": 400, "fade_in_speed": 400, "slide_down_speed": 600, "use_alt_layout": 0, "disable_resize": 0, "disable_zoom": 0, "force_show_nav": 0, "show_caption": true, "loop_items": 0, "node_link_text": "View Image Details", "node_link_target": 0, "image_count": "Image !current of !total", "video_count": "Video !current of !total", "page_count": "Page !current of !total", "lite_press_x_close": "press \x3ca href=\"#\" onclick=\"hideLightbox(); return FALSE;\"\x3e\x3ckbd\x3ex\x3c/kbd\x3e\x3c/a\x3e to close", "download_link_text": "", "enable_login": false, "enable_contact": false, "keys_close": "c x 27", "keys_previous": "p 37", "keys_next": "n 39", "keys_zoom": "z", "keys_play_pause": "32", "display_image_size": "original", "image_node_sizes": "(\\.thumbnail|\\.preview)", "trigger_lightbox_classes": "img.thumbnail, img.image-thumbnail,img.preview, img.image-preview,img., img.image-", "trigger_lightbox_group_classes": "", "trigger_slideshow_classes": "", "trigger_lightframe_classes": "", "trigger_lightframe_group_classes": "", "custom_class_handler": 0, "custom_trigger_classes": "", "disable_for_gallery_lists": 1, "disable_for_acidfree_gallery_lists": true, "enable_acidfree_videos": true, "slideshow_interval": 5000, "slideshow_automatic_start": true, "slideshow_automatic_exit": true, "show_play_pause": true, "pause_on_next_click": false, "pause_on_previous_click": true, "loop_slides": false, "iframe_width": 600, "iframe_height": 400, "iframe_border": 1, "enable_video": 0 }, "googleanalytics": { "trackOutbound": 1, "trackMailto": 1, "trackDownload": 1, "trackDownloadExtensions": "7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip" } });
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create", "UA-25142278-3", { "cookieDomain": "auto" });ga("send", "pageview");
//--><!]]>
</script>
    <script src="/legacy/sites/all/themes/glossyblue_alex/js/swfobject.js" language="javascript"></script>
    <style type="text/css" media="print">@import "/legacy/sites/all/themes/glossyblue_alex/print.css";</style>
  </head>
  <body>
<div id="page">
  <div id="header">
    <div id="headerimg">
	  <h1><a href="/">Alex Stanhope</a></h1>
	  <div class="description"></div>
	</div>
	
	      <ul class="nav"><li class="menu-99 first last"><a href="/">Blog</a></li>
</ul>      </div>
  <div id="content">
    <div class="breadcrumb"><a href="/">Home</a></div>                        <h2>Trend Micro 2012 interrupts Windows file sharing over Samba without warning</h2>    
  
  <div style="margin-top: -10px" id="node-221" class="post node">
    <span class="post-cat"><ul class="links inline"><li class="taxonomy_term_1 first last"><a href="../../technology.1.html" rel="tag" title="">technology</a></li>
</ul></span><span class="post-calendar">Mon, 2012-09-17 08:20</span>
    <div class="post-content">
      <p>It's frustrating to be trying new things and they don't work, but there is nothing so irratating as something failing that you thought worked and consequently rely upon.  These last few weeks I've been struggling with a file sharing bug in Trend Micro's anti-virus program, though as with all these antivirus software originated problems, they don't tell you that.  Here's the bug report I was writing up while investigating and crucially the simple solution.</p>
<p>I'm trying to copy a virtual machine (VM) instance from one machine to another over a 1GB LAN.</p>
<p>I have no problem connecting between the machines.  There's plenty of free space on both.  I can copy small groups of files quite reliably, but copying large groups of large files (such as a VM) consistently causes the Windows file sharing client to report this problem mid way through:</p>
<p><code><br />
There is a problem accessing \\\<br />
Make sure you are connected to the network and try again.<br />
</code></p>
<p>Here's my setup:</p>
<p>* Client: Windows 7 Professional PC, no domain<br />
* Server: Mac Mini, OSX, HFS+ external drive hosting samba share</p>
<p>Transfer fails after copying a different amount of data each time, but all about 5GB:</p>
<p>Trial 1:  4.96GB<br />
Trial 2:  5.36GB<br />
Trial 3:  5.36GB</p>
<p>Transfer fails on different file every time:</p>
<p>Trial 1: testbed-s005.vmdk<br />
Trial 2: testbed-s006.vmdk<br />
Trial 3: testbed-s006.vmdk</p>
<p>After a trial fails, I can successfully copy the file on which it failed in isolation, so it doesn't seem to be a space issue.</p>
<p>A Wireshark analysis showed that the 'stop' command was originating from 10.12.1.105, which is the client machine, but why?</p>
<p>I looked at these solutions to other problems in the hope of solving mine:</p>
<p>Solution: http://serverfault.com/questions/387283/vhd-network-file-transfer-fails-consistently-at-4gb</p>
<p>Evaluation: does not apply because transfer is across a LAN and the failure is not after a consistent volume of data has been transferred.</p>
<p>I tried these things to find a working solution:</p>
<p>Solution: turn off Trend Micro Titanium Internet Security (anti-virus program on client)</p>
<p>Result: transfer completed successfully.  I tried it a second time and again it worked perfectly.</p>
<p>-----</p>
<p>Realising at this point that it was almost certainly another anti-virus problem wasting my time I re-enabled my antivirus program (Trend Micro) to discover that the transfer got interrupted again!  I redisabled it and did one final test.</p>
<p>I can say confidently that Trend Micro Titanium Internet Security is interrupting my large file set transfers.</p>
<p>Ultimately the solution was simple.  I added a folder exception to its 'scanning and monitoring', and transferred worked properly again.  If only Trend Micro had shown me pop-up to say "we've interrupted a large file transfer to your computer, click here to override", I wouldn't have had to spend half a day debugging it.</p>
<table id="attachments" class="sticky-enabled">
 <thead><tr><th>Attachment</th><th>Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td><a href="/legacy/system/files/file-fails-network-disappears.jpg">file-fails-network-disappears.jpg</a></td><td>19.27 KB</td> </tr>
 <tr class="even"><td><a href="/legacy/system/files/copy-suspends-reporting-last-file.jpg">copy-suspends-reporting-last-file.jpg</a></td><td>19.04 KB</td> </tr>
 <tr class="odd"><td><a href="/legacy/system/files/wireshark-healthy-transfer.jpg">wireshark-healthy-transfer.jpg</a></td><td>261.29 KB</td> </tr>
 <tr class="even"><td><a href="/legacy/system/files/wireshark-point-of-failure.jpg">wireshark-point-of-failure.jpg</a></td><td>285.82 KB</td> </tr>
 <tr class="odd"><td><a href="/legacy/system/files/add-exception-to-trend-micro.jpg">add-exception-to-trend-micro.jpg</a></td><td>23.58 KB</td> </tr>
</tbody>
</table>
          </div>    
</div>
<div class="clear"></div>    
	<div class="navigation">
	  <span class="previous-entries"></span> <span class="next-entries"></span>
	</div>	
		
	  </div><!--/content -->
  
<div id="sidebar-right">
<ul>
  <li>
      </li>
          <div id="block-block-6" class="clear-block block block-block">


  <div class="content"><p style="margin-top:5px;">
<script type="text/javascript" src="http://www.freerangefeedback.com/wito_rcv/js/wito_embed.js"></script><script type="text/javascript">
var wito_domainID = 52;
</script></p><p><a href="http://www.freerangefeedback.com" class="wito_embed_link wito_link_look" style="visibility: hidden">Feedback</a></p>
</div>
</div>
<div id="block-block-9" class="clear-block block block-block">


  <div class="content"><a href="http://twitter.com/alex_stanhope"><img src="/legacy/sites/all/themes/glossyblue_alex/images/twitter3gif.gif" alt="Follow Alex Stanhope on twitter" /></a></div>
</div>
<div id="block-block-10" class="clear-block block block-block">


  <div class="content"><h2>Online profiles</h2>

<p><a href="http://uk.linkedin.com/in/alexstanhope"><img src="/legacy/sites/all/themes/glossyblue_alex/icons/linkedin_32.png" alt="LinkedIn" /></a>

<a href="http://twitter.com/alex_stanhope"><img src="/legacy/sites/all/themes/glossyblue_alex/icons/twitter_32.png" alt="Twitter" /></a>

<a href="http://www.facebook.com/alexstanhopecom"><img src="/legacy/sites/all/themes/glossyblue_alex/icons/facebook_32.png" alt="Facebook" /></a>

<a href="http://www.flickr.com/photos/alex_stanhope/"><img src="/legacy/sites/all/themes/glossyblue_alex/icons/flickr_32.png" alt="Flickr" /></a>

<a href="http://www.google.com/profiles/alex.stanhope"><img src="/legacy/sites/all/themes/glossyblue_alex/icons/google_32.png" alt="Google" /></a>

<a href="http://www.youtube.com/user/alexstanhopecom"><img src="/legacy/sites/all/themes/glossyblue_alex/icons/youtube_32.png" alt="YouTube" /></a>

</p></div>
</div>
    
</ul>

</div><!--/sidebar -->

  <hr class="clear" />
  <!--/header -->
</div>
<div id="credits">
<div class="alignleft"><a href="/">Alex Stanhope</a> is a Technology consultant to the UK Creative Industries and Venture Catalyst.  This is my personal website.<br />
<a href="http://maps.google.co.uk/?ie=UTF8&amp;ll=51.45497,-2.604103&amp;spn=0.036262,0.066605&amp;z=14">Bristol</a> | <a href="http://www.lightenna.com">Lightenna</a> | <a href="http://www.mkp.org.uk">ManKind Project</a> | <a href="http://www.goodk.co.uk">goodkarma</a><br />

All material copyright (c) 2006-2010 | <a href="http://www.lightenna.com">Website by Lightenna</a>, featuring <a href="http://www.ndesign-studio.com/">N.Design</a>'s GlossyBlue theme.</div> 
<div class="alignright"></div>

</div>

    </body>
</html>
